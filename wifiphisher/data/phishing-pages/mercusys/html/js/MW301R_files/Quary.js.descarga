function Quary(){Load.call(this);TDDP.call(this);this.block=0;this.nonBlock=1;this.unChgPwd=5;this.authTag="auth";this.METHODGET="get";this.group;this.loginErrHandle=new Object();this.loginUrlHashSetHandle=new Object();this.pagePRHandle=new Object();this.setLoginErrHandle=function(a){this.loginErrHandle=function(b){a(b)}};this.setUrlHashSet=function(a){this.loginUrlHashSetHandle=function(b,c){a(b,c)}};this.setPRHandle=function(a){this.pagePRHandle=a};this.securityEncode=function(f,d,b){var k=b;var a="";var h,e,c,j;var l=187,i=187;e=f.length;c=d.length;j=k.length;h=e>c?e:c;for(var g=0;g<h;g++){l=187;i=187;if(g>=e){i=d.charCodeAt(g)}else{if(g>=c){l=f.charCodeAt(g)}else{l=f.charCodeAt(g);i=d.charCodeAt(g)}}a+=k.charAt((l^i)%j)}return a};this.rsf=function(c){var a=this.domainUrl,b=this;if((false==this.local)||(this.routerAlive)){a+="?code="+TDDP_READ+"&asyn=1";this.request(a,undefined,"post",this.ajaxAsyn,function(){if(b.result.errorno==EUNAUTH){b.parseAuthRlt();c()}})}};this.postUnAuthHandle=function(b,a,e,d,g){var c=this.result.data;var f=this;if(this.result.errorno==EUNAUTH){this.parseAuthRlt();this.auth(this.pwd);if(this.result.errorno==ENONE){this.request(this.orgURL(b),a,g,e,d);return true}window.setTimeout(function(){if(f.METHODGET==g.toLowerCase()){f.loginErrHandle()}else{f.loginErrHandle(function(){})}},0);return false}return true};this.read=function(b){var a=this.domainUrl+"?code="+TDDP_READ+"&asyn=0";this.initResult();if((false==this.local)||(this.routerAlive)){this.request(this.orgURL(a),b,"post",this.ajaxSyn);this.postUnAuthHandle(a,b,this.ajaxSyn,undefined,"post")}return this.result.errorno};this.readEx=function(a){this.read(a);return this.findBlock(a)};this.readNonBlock=function(d,c){var a=this.domainUrl,b=this;if((false==this.local)||(this.routerAlive)){a+="?code="+TDDP_READ+"&asyn=1";this.request(this.orgURL(a),d,"post",this.ajaxAsyn,function(){var e=(b.result.errorno==EUNAUTH);if(true==e){b.postUnAuthHandle(a,d,b.ajaxAsyn,c,"post")}else{c&&c(b.result)}})}else{if((true==this.local)){c&&c(b.result)}}};this.write=function(c,b){var a=this.domainUrl+"?code="+TDDP_WRITE+"&asyn="+b;this.initResult();if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(this.orgURL(a),c,"post",this.ajaxSyn);this.externLoading(false);this.postUnAuthHandle(a,c,this.ajaxSyn,undefined,"post")}return this.result.errorno};this.writeNonBlock=function(e,d,c){var a=this.domainUrl,b=this;if((false==this.local)||(this.routerAlive)){a+="?code="+TDDP_WRITE+"&asyn="+d;this.externLoading(true);this.request(this.orgURL(a),e,"post",this.ajaxAsyn,function(){var f=(b.result.errorno==EUNAUTH);if(true==f){b.postUnAuthHandle(a,e,b.ajaxAsyn,c,"post")}b.externLoading(false);if(false==f){c&&c(b.result)}})}else{if((true==this.local)){c&&c(b.result)}}};this.instr=function(b,g){var a=this.domainUrl+"?code="+TDDP_INSTRUCT+"&asyn=0";var f=b,d,e,c=this;this.initResult();if((false==this.local)||(this.routerAlive)){if(undefined!=g){this.externLoading(true);this.request(this.orgURL(a),f,"post",this.ajaxAsyn,function(h){var i=(h.errorno==EUNAUTH);if(true==i){c.postUnAuthHandle(a,f,c.ajaxAsyn,g,"post")}c.externLoading(false);if(false==i){g(h)}})}else{this.externLoading(true);this.request(this.orgURL(a),f,"post",this.ajaxSyn);this.externLoading(false);this.postUnAuthHandle(a,f,this.ajaxSyn,undefined,"post")}}return this.result};this.reboot=function(){var a=this.domainUrl+"?code="+TDDP_REBOOT+"&asyn=1";this.initResult();if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(this.orgURL(a),"","post",this.ajaxSyn);this.externLoading(false);this.postUnAuthHandle(a,"",this.ajaxSyn,undefined,"post")}return this.result};this.reset=function(){var a=this.domainUrl+"?code="+TDDP_RESET+"&asyn=1";this.initResult();if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(this.orgURL(a),"","post",this.ajaxSyn);this.externLoading(false);this.postUnAuthHandle(a,"",this.ajaxSyn,undefined,"post")}return this.result};this.setResetSign=function(b){try{sessionLS.setItem(RESETSIGN,b);this.setWzd=b}catch(a){}};this.orgAuthPwd=function(c){var b="RDpbLfCPsJZ7fiv";var a="yLwVl0zKqws7LgKPRQ84Mdt708T1qQ3Ha7xv3H7NyU84p21BriUWBU43odz3iP4rBL3cD02KZciXTysVXiV8ngg6vL48rPJyAUw0HurW20xqxv9aYb4M9wK1Ae0wlro510qXeU07kV57fQMc8L6aLgMLwygtc0F10a0Dg70TOoouyFhdysuRMO51yY5ZlOZZLEal1h0t9YQW0Ko7oBwmCAHoic4HYbUyVeU3sfQ1xtXcPcf1aT303wAQhv66qzW";return this.securityEncode(c,b,a)};this.setLgPwd=function(b){try{sessionLS.setItem(LGKEYSTR,b);this.pwd=b}catch(a){}};this.changePwd=function(a,b){var c=this.domainUrl+"?code="+TDDP_CHGPWD+"&asyn=0&auth="+this.encodePara(a);this.initResult();if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(this.orgURL(c),b,"post",this.ajaxSyn);this.externLoading(false);this.postUnAuthHandle(c,b,this.ajaxSyn,undefined,"post");if(this.result.errorno==ENONE){this.setLgPwd(b)}}return this.result};this.logout=function(){var a=this.domainUrl+"?code="+TDDP_LOGOUT+"&asyn=0";this.initResult();if((false==this.local)||(this.routerAlive)){this.auth(this.pwd);this.request(this.orgURL(a),null,"post",this.ajaxSyn);this.setLgPwd("");this.session=""}return this.result};this.changeDefaultPwd=function(a){return this.changePwd("WaQ7xbhc9TefbwK",this.orgAuthPwd(a))};this.changeSysPwd=function(a,b){return this.changePwd(this.orgAuthPwd(a),this.orgAuthPwd(b))};this.parseAuthRlt=function(){var a;var b=this.result.data;if(b.lastIndexOf("\r\n")==b.length-2){b=b.substring(0,b.length-2)}a=b.split("\r\n");if(EUNAUTH==this.result.errorno){authInfo[1]=a[0];authInfo[2]=a[1];authInfo[3]=a[2];authInfo[4]=a[3];$.group=a[4];$.pagePRHandle()}return a};this.auth=function(b){var c=b;var a=this.domainUrl+"?code="+TDDP_AUTH+"&asyn=0";if(b==undefined||0==c.length){this.result.errorno=EUNAUTH;return this.result}b=undefined;this.initResult();this.session=this.securityEncode(authInfo[3],c,authInfo[4]);a+=("&id="+this.encodePara(this.session));if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(a,b,"post",this.ajaxSyn);this.externLoading(false)}this.parseAuthRlt();if(ENONE==this.result.errorno){this.setLgPwd(c)}return this.result};this.getPeerMac=function(){var a=this.domainUrl+"?code="+TDDP_GETPEERMAC+"&asyn=0";this.initResult();if((false==this.local)||(this.routerAlive)){this.externLoading(true);this.request(this.orgURL(a),"","post",this.ajaxSyn);this.postUnAuthHandle(a,"",this.ajaxSyn,undefined,"post");this.externLoading(false)}return this.result}};