function Basic(){this.w=window;this.routerAlive=false;this.head=document.getElementsByTagName("head")[0];this.d=document;this.isIE=(navigator.userAgent.indexOf("IE")>=0);this.domainUrl="http://192.168.1.1";this.time=1000;this.explorerTag=0;this.session="";this.pwd="";this.setWzd=0;this.httpTag="http://";this.ajaxAsyn=true;this.ajaxSyn=false;this._init=function(){if(typeof bWebUISimulator!="undefined"&&bWebUISimulator===true){this.local=true}else{this.local=(location.protocol=="file:")}};this.isArray=function(obj){return Object.prototype.toString.call(obj)==="[object Array]"};this.getExplorer=function(){var nv=navigator.userAgent;if(nv.indexOf("IE 6.0")>0){this.explorerTag=6}else{if(nv.indexOf("IE 7.0")>0){this.explorerTag=7}}};this.transText=function(text){if(text.length>0){text=text.substring(text.indexOf("\r\n")+2);try{return eval("("+text+")")}catch(ex){return""}}};this.id=function(idStr){return document.getElementById(idStr)};this.changeDomain=function(domain){var urlHeaderTag=this.httpTag;this.domainUrl=domain.indexOf(urlHeaderTag)>=0?(domain):(urlHeaderTag+domain)};this.initUrl=function(){if(!this.local){var url=location.href;var pos=url.indexOf("#");if(pos>0){url=url.substring(0,pos)}this.domainUrl=url}};this.objInitNull=function(obj){for(var property in obj){if(typeof obj[property]=="object"){this.arguments.callee(obj[property])}else{obj[property]=""}}};this.objSet=function(obj,val){if(this.isArray(val)){var n=0;for(var property in obj){obj[property]=val[n++]}}else{for(var property in obj){obj[property]=val}}};this.objCopy=function(target,srcObj){var temp;for(var porperty in target){temp=srcObj[porperty];if(temp!=undefined){target[porperty]=temp}}};this.encodePara=function(val){val=encodeURL(val.toString());return val};this._init()}function WebAjax(){this.isIE=(navigator.userAgent.indexOf("IE")>=0);this.ajaxTimeout=2000;this.sessionKey="id";this.externDataParseFunc=new Function();this.result={errorno:0,data:"",timeout:true};this.initResult=function(a){this.result.errorno=0;this.result.data="";this.result.timeout=true};this.setDataParseFunc=function(a){this.externDataParseFunc=a};this.changeAsynTime=function(a){this.ajaxTimeout=a};this.getValueFromUrl=function(a,d){var c="",e;d+="=";e=a.indexOf(d);if(e>=0){var b=a.substring(e+d.length);e=b.indexOf("&");e=e>0?e:b.length;c=b.substring(0,e)}return c};this.orgURL=function(b){var a="";var c=b.indexOf("?");if(this.session.length==0){return b}if(c>0){if(b.substring(b.length-1)!="&"){a="&"}b+=(a+this.sessionKey+"="+this.encodePara(this.session))}else{b+=("?"+this.sessionKey+"="+this.encodePara(this.session))}return b};this.createXHR=function(){var b;if(undefined!=window.ActiveXObject){try{if(true==this.local){b=new ActiveXObject("Microsoft.XMLHTTP")}else{b=new XMLHttpRequest()}}catch(a){b=new ActiveXObject("Microsoft.XMLHTTP")}}else{b=new XMLHttpRequest()}return b};this.request=function(d,q,c,n,e,g,r,b){var f=this.createXHR();var h,i,m,j=false;var o=this,a=false;this.initResult(o.result);function p(){var t=new Date();var s=(g==undefined?o.ajaxTimeout:g);var u=t.getTime()+s;j=false;while(true){t=new Date();if(a==true){return}if(t.getTime()>u){j=true;a=false;f.onreadystatechange=function(){};f=null;o.initResult(o.result);o.result.errorno=ENONE;o.result.timeout=true;return}}}function k(v){var x,t,w=0,u,s;x=v.indexOf("\r\n");t=v.substring(0,x);if(/\D/.test(t)==true||t.length==0){t=0;u=v}else{s=t.length-1;while((t.charAt(w)=="0")&&(w<s)){w++}t=parseInt(t.substring(w),10);u=v.substring(x+2)}return[t,u]}f.onreadystatechange=function(){if(true==j){return}if(f.readyState==4&&(true===$.local||f.status>=100)){a=true;o.result.timeout=false;h=f.responseText;if(h){o.result.data=h}var s=k(h);o.result.errorno=s[0];o.result.data=s[1];if(q!=undefined){o.externDataParseFunc(o.result.data)}if(e!=undefined){e(o.result)}return true}};if((r!=undefined)&&(b!=undefined)){f.open(c,d,n,r,b)}else{f.open(c,d,n)}try{if(this.isIE==true&&false==this.local){f.setRequestHeader("If-Modified-Since","0")}if(q!=undefined){f.send(q.toString())}else{f.send(null)}}catch(l){}}}function Load(){Basic.call(this);WebAjax.call(this);this.asyn=true;this.syn=false;this.detectTime=1000;this.div=document.createElement("div");this.externResizefunc=new Function();this.externJSP=new Function();this.externLoading=new Function();this.externPageHandle=new Function();this.pageTickArray=[];this.scriptArray=[];this.unAuthCode=401;this.httpOK=200;this.setTimeout=function(b,d){var c=window.setTimeout(b,d);this.pageTickArray.push(c);return c};function a(b){if(b){b.innerHTML="";return}}this.addScript=function(c){if(c&&/\S/.test(c)){var b=this.d.createElement("script");b.type="text/javascript";if(b.text===undefined){b.appendChild(this.d.createTextNode(c))}else{b.text=c}this.head.insertBefore(b,this.head.firstChild);this.head.removeChild(b)}};this.getNodeArray=function(b,f){var e=[];for(var d=0,c=b.length;d<c;d++){e[d]=b[d]}f(e)};this.addDomNode=function(b,c){var d=this;this.div.innerHTML="div"+c;this.div.removeChild(this.div.firstChild);this.getNodeArray(this.div.childNodes,function(k){a(b);for(var h=0,f=d.pageTickArray.length;h<f;h++){try{window.clearTimeout(d.pageTickArray[h])}catch(g){}}var e=[];for(var h=0,f=k.length;h<f;h++){if((k[h].nodeType==1)&&(k[h].nodeName.toLowerCase()==="script")){e.push(k[h])}else{b.appendChild(k[h])}}for(var h=0,f=e.length;h<f;h++){d.addScript(e[h].text||e[h].textContent||e[h].innerHTML||"")}})};this.pageResize=function(){this.externResizefunc()};this.setPageResize=function(b){this.externResizefunc=b};this.setexternJSP=function(b){this.externJSP=b};this.setExternLoading=function(b){this.externLoading=b};this.setExternPageHandle=function(b){this.externPageHandle=b};this.append=function(b,c){if(b&&(b.nodeType==1)&&(typeof c==="string")){this.addDomNode(b,c);this.pageResize()}};this.detectWidthImg=function(d){var c=new Image();var b=this.domainUrl.length;c.onload=function(){d()};if(detectPathStr[0]=="/"&&this.domainUrl[b-1]=="/"){c.src=this.domainUrl.substr(0,b-1)+detectPathStr}else{if(detectPathStr[0]!="/"&&this.domainUrl[b-1]!="/"){c.src=this.domainUrl+"/"+detectPathStr}else{c.src=this.domainUrl+detectPathStr}}c.src+="?requence="+Math.random()};this.detect=function(d){if(true==isIETenLess){this.detectWidthImg(d)}else{var b=this.domainUrl.length;var c;if(detectPathStr[0]=="/"&&this.domainUrl[b-1]=="/"){c=this.domainUrl.substr(0,b-1)+detectPathStr}else{if(detectPathStr[0]!="/"&&this.domainUrl[b-1]!="/"){c=this.domainUrl+"/"+detectPathStr}else{c=this.domainUrl+detectPathStr}}c+="?requence="+Math.random();this.request(c,undefined,"get",this.asyn,d)}};this.loadHand=function(b,d){str=this.externJSP(b.data);if(str!=undefined){b.data=str}this.append(this.id(d),b.data);try{this.externPageHandle()}catch(c){}};this.load=function(b,i,h){var e=false;var d,g;var f=this;function c(j){e=j.timeout;if(!e){g=f.externJSP(j.data);if(g!=undefined){j.data=g}f.loadHand(j,h)}if(i){i(j)}}if(this.local||i!=undefined){this.loadAsyn(b,this.ajaxTimeout,function(j){if(j.errorno==EUNAUTH){setLoadPage(b,h);f.postUnAuthHandle(b,undefined,f.asyn,c,"get")}else{if(j.errorno==ENONE){c(j)}}})}else{this.request(this.orgURL(b),undefined,"get",this.syn);if(this.result.errorno==EUNAUTH){setLoadPage(b,h);if(true==this.postUnAuthHandle(b,undefined,this.syn,undefined,"get")){c(this.result)}}else{if(this.result.errorno==ENONE){c(this.result)}}}return e};this.loadAsyn=function(b,c,d){this.request(this.orgURL(b),undefined,"get",this.asyn,d,c)}};